_ä¼ºæœå™¨æ“´å……èˆ‡é«˜å¯ç”¨æž¶æ§‹è¨­è¨ˆ_

---

## **ðŸ’¡ ä¸€ã€ç‚ºä»€éº¼è¦è€ƒæ…® Scaling & HAï¼Ÿ**

> ç•¶ä½¿ç”¨è€…è®Šå¤šã€è«‹æ±‚è®Šå¤šã€è³‡æ–™è®Šå¤§æ™‚ï¼Œ
> ç³»çµ±å¿…é ˆèƒ½ã€Œæ’ä½ã€ä¸æŽ›æŽ‰ã€å¿«é€Ÿå›žæ‡‰ã€ã€‚

é€™æ™‚å€™å°±éœ€è¦ï¼š

1. **Scalingï¼ˆæ“´å……èƒ½åŠ›ï¼‰** â†’ æ’å¾—èµ·æ›´å¤šæµé‡
2. **High Availabilityï¼ˆé«˜å¯ç”¨æ€§ï¼‰** â†’ æŽ›ä¸€å°ä¸å½±éŸ¿æœå‹™


## **âš™ï¸ äºŒã€Scalingï¼ˆæ“´å……ï¼‰æ˜¯ä»€éº¼ï¼Ÿ**

> ðŸ”¸ **Scaling = å¢žåŠ è³‡æºï¼Œè®“ç³»çµ±èƒ½è™•ç†æ›´å¤šè«‹æ±‚ã€‚**

æœ‰å…©ç¨®ä¸»è¦æ–¹å¼ï¼š

|**é¡žåž‹**|**è‹±æ–‡**|**èªªæ˜Ž**|**å¸¸è¦‹ä½œæ³•**|
|---|---|---|---|
|**åž‚ç›´æ“´å……**|Vertical Scaling (Scale-Up)|å‡ç´šå–®ä¸€ä¼ºæœå™¨çš„ç¡¬é«”æ€§èƒ½|å¢žåŠ  CPUã€RAMã€SSD|
|**æ°´å¹³æ“´å……**|Horizontal Scaling (Scale-Out)|å¢žåŠ ä¼ºæœå™¨ç¯€é»žæ•¸é‡|å¤šå°ä¼ºæœå™¨ + è² è¼‰å¹³è¡¡å™¨|

## **ðŸ§© ä¸‰ã€åž‚ç›´æ“´å……ï¼ˆVertical Scalingï¼‰**

> ðŸš€ ã€Œæ•‘æ€¥ç”¨ã€çš„æœ€ç›´æŽ¥æ–¹å¼ï¼šå‡ç´šç¡¬é«”ï¼

ä¾‹å­ï¼š

- æŠŠ EC2 t3.medium â†’ t3.2xlarge
- MySQL ä¸»æ©Ÿå¾ž 2 CPU â†’ 16 CPU

### **âœ… å„ªé»ž**

- ç°¡å–®ã€å¿«é€Ÿï¼ˆå¹¾ä¹Žä¸æ”¹æž¶æ§‹ï¼‰
- æˆæœ¬ä¸€é–‹å§‹ä½Ž
- ä¸éœ€åˆ†æ•£å¼è¨­è¨ˆ
  
### **âŒ ç¼ºé»ž**

- æœ‰**å¤©èŠ±æ¿**ï¼ˆç¡¬é«”å‡ç´šæ¥µé™ï¼‰
- å–®é»žæ•…éšœé¢¨éšªé«˜
- å‡ç´šéŽç¨‹å¯èƒ½ä¸­æ–·æœå‹™
  
### **ðŸ’¬ å¯¦å‹™å»ºè­°ï¼š**

> ç•¶ç³»çµ±é–‹å§‹æ’ä¸ä½ï¼Œå¯ä»¥å…ˆåž‚ç›´æ“´å……æ•‘æ€¥ï¼Œ
> å†è¦åŠƒå¾ŒçºŒçš„æ°´å¹³æ“´å±•æ–¹æ¡ˆã€‚


## **âš–ï¸ å››ã€æ°´å¹³æ“´å……ï¼ˆHorizontal Scalingï¼‰**

> ðŸ§  ã€Œæ ¹æœ¬è§£æ³•ã€ï¼šè®“æ›´å¤šä¼ºæœå™¨åˆ†æ”¤å£“åŠ›ã€‚

ä¾‹å­ï¼š

- åŽŸæœ¬ä¸€å° API Server â†’ æ‹†æˆ 4 å°
- å‰é¢æ”¾ä¸€å° **Load Balancer** åšåˆ†æµ
  
### **ðŸ“¦ æž¶æ§‹ç¯„ä¾‹ï¼š**

```
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ LoadBalancer â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   [App Server1] [App Server2] [App Server3]
```

### **âœ… å„ªé»ž**

- å¹¾ä¹Žå¯ç„¡é™æ“´å±•ï¼ˆåªè¦éŒ¢å¤ ï¼‰
- æŸå°æŽ›äº†å…¶ä»–å°å¯æŽ¥æ‰‹ï¼ˆé«˜å¯ç”¨ï¼‰
- å¯çµåˆ Auto Scaling Group è‡ªå‹•æ“´ç¸®

### **âŒ ç¼ºé»ž**

- æž¶æ§‹èˆ‡è³‡æ–™åŒæ­¥æ›´è¤‡é›œï¼ˆSessionã€DBã€Cacheï¼‰
- éƒ¨ç½²æˆæœ¬é«˜ï¼ˆå¤šç¯€é»žç¶­è­·ï¼‰
- Debug è®Šé›£ï¼ˆå¤šç¯€é»žç’°å¢ƒï¼‰

---

## **âš™ï¸ äº”ã€æ­é… Load Balancerï¼ˆè² è¼‰å¹³è¡¡å™¨ï¼‰**

> **æ°´å¹³æ“´å……ä¸€å®šè¦æ­é… LBï¼Œå¦å‰‡ä½¿ç”¨è€…ä¸çŸ¥é“è¦é€£å“ªå°ä¼ºæœå™¨ã€‚**

### **ðŸ§­ LB çš„è§’è‰²**

- åˆ†é…æµé‡ï¼ˆRound Robin / Least Connection / Hashï¼‰    
- åµæ¸¬å¥åº·ç‹€æ…‹ï¼ˆHealth Checkï¼‰
- è‡ªå‹•ç§»é™¤æŽ›æŽ‰çš„ç¯€é»žï¼ˆFailoverï¼‰
- å¯æä¾› SSL Offloadingã€Session Sticky ç­‰åŠŸèƒ½

### **ðŸŒ å¸¸è¦‹å¯¦ä½œ**

| **é¡žåž‹** | **ç¯„ä¾‹**                                         |
| ------ | ---------------------------------------------- |
| é›²ç«¯ LB  | AWS ELB / GCP Load Balancer / Azure Front Door |
| è»Ÿé«” LB  | Nginx / HAProxy / Envoy                        |
| ç¡¬é«” LB  | F5 Networks / Citrix ADC                       |

è©³è¦‹ [[Load Balancer]]

---

## **ðŸ§± å…­ã€High Availabilityï¼ˆé«˜å¯ç”¨æž¶æ§‹ï¼‰**

> **é«˜å¯ç”¨æ€§ï¼ˆHAï¼‰** æ˜¯æŒ‡ç³»çµ±åœ¨éƒ¨åˆ†æ•…éšœä¸‹ä»èƒ½æ­£å¸¸æœå‹™ã€‚

å¸¸è¦‹è¨­è¨ˆæ‰‹æ³•ï¼š

|**å±¤ç´š**|**ä½œæ³•**|**èªªæ˜Ž**|
|---|---|---|
|**ä¼ºæœå™¨å±¤**|å¤šå¯¦ä¾‹ + LB|æŽ›ä¸€å°ä¸å½±éŸ¿æ•´é«”ï¼ˆFailoverï¼‰|
|**è³‡æ–™åº«å±¤**|Master-Slave / Replication|å¯«å…¥æŽ›æŽ‰å¯æ”¹è®€åº«å‡ç´š|
|**å¿«å–å±¤**|Redis Cluster / Sentinel|è‡ªå‹•åˆ‡æ›ä¸»ç¯€é»ž|
|**å„²å­˜å±¤**|S3ã€GCSã€Ceph|å¤šå€å‚™æ´å­˜æ”¾|
|**ç¶²è·¯å±¤**|å¤š AZã€å¤š Region|æ–·ç·šè‡ªå‹•å°Žæµ|

---
### **ðŸ’¡ ä¾‹ï¼šå¤šå€åŸŸéƒ¨ç½²ï¼ˆMulti-AZï¼‰**

```
        [Region 1] â”€â”€â”€ [LoadBalancer] â”€â”€â”€ [App Servers]
             â”‚
             â””â”€â”€ Replicate to
             â”‚
        [Region 2] â”€â”€â”€ [LoadBalancer] â”€â”€â”€ [App Servers]
```

å¦‚æžœä¸€å€‹åœ°å€ï¼ˆAZï¼‰æ•…éšœï¼Œæµé‡è‡ªå‹•åˆ‡å¾€å¦ä¸€åœ°å€ã€‚

---

## **ðŸ” ä¸ƒã€ä¼ºæœå™¨å‚™æ´ï¼ˆServer Redundancyï¼‰**

> ðŸ§© ã€Œæ²’æœ‰å‚™æ´çš„ç³»çµ±ï¼Œå°±ç­‰è‘—æŽ›ã€‚ã€

### **é¡žåž‹ï¼š**

| **é¡žåž‹**             | **èªªæ˜Ž**           |
| ------------------ | ---------------- |
| **Active-Active**  | æ‰€æœ‰ç¯€é»žåŒæ™‚æœå‹™ï¼ˆæœ€å¸¸è¦‹ï¼‰    |
| **Active-Passive** | ä¸€å°ä¸»ç”¨ã€ä¸€å°å‚™æ´ï¼Œä¸»æŽ›æ™‚æ‰åˆ‡æ› |
| **Hot Standby**    | å‚™æ´æ©ŸæŒçºŒåŒæ­¥ã€éš¨æ™‚å¯åˆ‡æ›    |
| **Cold Standby**   | å‚™æ´æ©Ÿé—œæ©Ÿï¼ŒæŽ›æŽ‰å¾Œæ‰å•Ÿå‹•     |
### **ðŸ“˜ ä¾‹å­ï¼š**

- **Web Server**ï¼šActive-Active + LB    
- **DB Server**ï¼šPrimary + Replica (Async / Sync Replication)
- **Cache / MQ**ï¼šCluster æ¨¡å¼ï¼ˆä¸»å¾žè‡ªå‹•é¸èˆ‰ï¼‰

---
## **ðŸ”„ å…«ã€è‡ªå‹•æ“´ç¸®ï¼ˆAuto Scalingï¼‰**

ç¾ä»£é›²æœå‹™æä¾›ã€Œè‡ªå‹•åŒ–æ°´å¹³æ“´ç¸®ã€æ©Ÿåˆ¶ã€‚

| **é›²æœå‹™**                                    | **åŠŸèƒ½**             |
| ------------------------------------------ | ------------------ |
| AWS Auto Scaling Group                     | æ ¹æ“š CPU / è«‹æ±‚é‡è‡ªå‹•åŠ æ¸›æ©Ÿå™¨ |
| GCP Instance Group                         | æ”¯æ´è‡ªå‹•æ“´ç¸®èˆ‡å¥åº·æª¢æŸ¥        |
| Kubernetes HPA (Horizontal Pod Autoscaler) | æ ¹æ“šè² è¼‰è‡ªå‹•å¢žåŠ  Pod       |

ðŸ’¡ **å„ªé»ž**ï¼š
- æµé‡é«˜å³°è‡ªå‹•æ“´å……
- é–’ç½®æ™‚è‡ªå‹•ç¸®æ¸›çœéŒ¢
- æ­é… Load Balancer ç„¡ç¸«æµé‡åˆ†é…

---

## **ðŸ§  ä¹ã€Scaling å¯¦å‹™ç­–ç•¥**

| **ç‹€æ³**     | **è§£æ³•**                        |
| ---------- | ----------------------------- |
| çªç„¶æµé‡æš´å¢ž     | é–‹å•Ÿ Auto Scaling / å¢žåŠ ç¯€é»ž        |
| çŸ­æœŸæ´»å‹•ï¼ˆé™æ™‚æ¶è³¼ï¼‰ | æå‰é ç†±å¿«å– / å¢žåŠ ç¯€é»ž / å•Ÿå‹• CloudFront |
| ç‰¹å®š API é«˜è² è¼‰ | æ‹†æˆç¨ç«‹å¾®æœå‹™ / ä½¿ç”¨ Queue            |
| è³‡æ–™åº«ç“¶é ¸      | è®€å¯«åˆ†é›¢ + Cache                  |
| ç†±é»žä¼ºæœå™¨è² è¼‰é«˜   | ä½¿ç”¨ Consistent Hash + CDN      |

---
## **ðŸ§© åã€æ•´é«”æ¦‚å¿µåœ–**

```
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  LoadBalancerâ”‚
               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   [App Server 1]  [App Server 2]  [App Server 3]
       â”‚              â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Database Cluster â†â”€â”€â”€â”€â”˜
                      â”‚
                    Cache
                      â”‚
                   Storage
```

---

## **âœ… åä¸€ã€ä¸€å¥è©±ç¸½çµ**

> âš¡ **Scaling è§£æ±ºã€Œæ’ä¸ä½ã€çš„å•é¡Œï¼ŒHA è§£æ±ºã€ŒæŽ›æŽ‰ã€çš„å•é¡Œã€‚**

- > åž‚ç›´æ“´å……ï¼šæ•‘æ€¥ç”¨ï¼Œç°¡å–®ä½†æœ‰é™    
- > æ°´å¹³æ“´å……ï¼šé•·æœŸæ–¹æ¡ˆï¼Œè¦æ­é… LB
- > é«˜å¯ç”¨æž¶æ§‹ï¼šè®“ä»»ä½•å–®é»žæ•…éšœéƒ½ä¸è‡´æ–¼ç™±ç˜“

> ðŸ’¡ çœŸæ­£çš„ç©©å®šç³»çµ±ï¼Œä¸€å®šåŒæ™‚å…·å‚™ï¼š
> **Scaling + Redundancy + Monitoring + Failover**


